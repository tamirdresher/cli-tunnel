<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0d1117">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>cli-tunnel</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xterm/xterm@5.5.0/css/xterm.min.css" integrity="sha384-tStR1zLfWgsiXCF3IgfB3lBa8KmBe/lG287CL9WCeKgQYcp1bjb4/+mwN6oti4Co" crossorigin="anonymous">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div id="app">
    <header id="header">
      <span id="status-indicator">●</span>
      <span id="status-text">Connecting...</span>
      <span style="flex:1"></span>
      <button id="btn-sessions" onclick="toggleView()" style="background:none;border:none;color:var(--text-dim);font-family:var(--font);font-size:12px;cursor:pointer">Sessions</button>
    </header>

    <!-- Dashboard view -->
    <div id="dashboard" class="hidden">
      <div style="padding:12px;color:var(--text-dim);font-size:12px">Loading sessions...</div>
    </div>

    <!-- Terminal view (xterm.js) -->
    <div id="terminal-container"></div>

    <!-- Legacy terminal (ACP mode fallback) -->
    <main id="terminal" class="hidden"></main>

    <footer id="input-area">
      <div id="key-bar">
        <button data-key="\x1b[A">↑</button>
        <button data-key="\x1b[B">↓</button>
        <button data-key="\x1b[C">→</button>
        <button data-key="\x1b[D">←</button>
        <button data-key="\t">Tab</button>
        <button data-key="\r">Enter</button>
        <button data-key="\x1b">Esc</button>
        <button data-key="\x03">Ctrl+C</button>
        <button data-key=" ">Space</button>
        <button data-key="\x7f">⌫</button>
      </div>
      <form id="input-form">
        <span class="prompt">&gt;</span>
        <input type="text" id="input" placeholder="Send a message..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
      </form>
    </footer>
  </div>
  <div id="permission-overlay" class="hidden"></div>
  <script src="https://cdn.jsdelivr.net/npm/@xterm/xterm@5.5.0/lib/xterm.min.js" integrity="sha384-J4qzUjBl1FxyLsl/kQPQIOeINsmp17OHYXDOMpMxlKX53ZfYsL+aWHpgArvOuof9" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@xterm/addon-fit@0.10.0/lib/addon-fit.min.js" integrity="sha384-XGqKrV8Jrukp1NITJbOEHwg01tNkuXr6uB6YEj69ebpYU3v7FvoGgEg23C1Gcehk" crossorigin="anonymous"></script>
  <script src="/app.js"></script>
</body>
</html>

